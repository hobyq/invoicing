<template>  <div>    <v-data-table        :headers="headers"        :items="clients"        class="elevation-1"        :loading="isLoading"    >      <template v-slot:top>        <v-toolbar flat>          <v-toolbar-title>Clients List</v-toolbar-title>          <v-divider class="mx-4" inset vertical></v-divider>          <v-spacer></v-spacer>          <v-dialog v-model="dialog" max-width="500px">            <template v-slot:activator="{ on, attrs }">              <v-btn color="primary" v-bind="attrs" v-on="on">                Add Item              </v-btn>            </template>            <v-card>              <v-card-title>                <span class="text-h5">Details</span>              </v-card-title>              <v-card-text>                <v-text-field v-model="newClient.name" label="Name"></v-text-field>                <v-select                    :items="countries"                    item-value="id"                    item-text="name"                    v-model="newClient.country" label="Country"></v-select>              </v-card-text>              <v-card-actions>                <v-spacer></v-spacer>                <v-btn color="blue" text @click="close">                  Cancel                </v-btn>                <v-btn color="blue" text @click="save">                  Save                </v-btn>              </v-card-actions>            </v-card>          </v-dialog>        </v-toolbar>      </template>    </v-data-table>  </div></template><script>import {api_get, api_post} from "../plugins/network";export default {  name: "Clients",  data: function () {    return {      headers: [        {          text: 'Name',          value: 'name',          align: 'start',          sortable: true,        },        {          text: 'Country',          value: 'country.name',          align: 'start',          sortable: true,        },        {          text: 'Total Invoices',          value: 'invoices.length',          align: 'start',          sortable: true,        },      ],      isLoading: true,      newClient: {        name: '',        country: -1      },      dialog: false,      countries: [],      clients: [],    }  },  created() {    this.load(true)    this.init();    this.load_data();    this.load(false)  },  methods: {    async init() {      this.countries = await api_get('/api/countries');    },    async load_data() {      this.clients = await api_get('/api/clients');    },    close() {      this.dialog = false;    },    async save() {      this.load(true);      await api_post('/api/clients', {        name: this.newClient.name,        country: {          id: `/api/countries/${this.newClient.country}`        }      });      this.close()      // reset new item      this.newClient = {        name: '',        country: '',      };      await this.load_data();      this.load(false);    },    load(state) {      this.isLoading = state;    }  }}</script><style scoped></style>